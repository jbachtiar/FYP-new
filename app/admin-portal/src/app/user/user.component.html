<div *ngIf="loading" style="margin-top:200px">
    <app-loading></app-loading>
</div>
<div class="container-fluid" *ngIf="!loading">
    <div class="row">
        <div class="col-lg-4 col-md-7">
            <div class="card card-user">
                <div class="image">
                    <img src="assets/img/background.jpg" alt="..." />
                </div>
                <div class="content">
                    <div class="author">
                        <img class="avatar border-white" src="assets/img/user.png" alt="..." />
                        <h4 class="title">{{user.firstName}} {{user.lastName}}<br />
                            <small><b>{{user.email}}</b></small><br>
                            <small>{{user.phoneNo}}</small><br>
                            <small>{{user.roleId}}</small>
                        </h4>
                        <hr>
                        <button [disabled]="updateProf" class="btn btn-info btn-fill btn-wd" (click)="update()">Update Profile</button>
                    </div>
                </div>

            </div>
        </div>
        <div *ngIf="updateProf" class="col-lg-8 col-md-7">
            <div class="card">
                <div class="header">
                    <h4 class="title">Edit Profile</h4>
                </div>
                <hr>
                <div class="content">
                    <form name="form" (ngSubmit)="updateProfile() && f.form.valid" #f="ngForm" novalidate>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="exampleInputEmail1">Email Address</label>
                                    <input type="email" class="form-control border-input" id="email" placeholder="Email" [(ngModel)]="user.email" name="email"
                                        [disabled]="editPass" required>
                                    <div *ngIf="f.submitted && !email.valid" class="help-block">
                                        Email is required.
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="exampleInputEmail1">Phone Number</label>
                                    <input type="text" class="form-control border-input" placeholder="Phone Number" [(ngModel)]="user.phoneNo" name="phoneNo"
                                        id="phoneNo" [disabled]="editPass" required>
                                    <div *ngIf="f.submitted && !phoneNo.valid" class="help-block">
                                        Phone Number is required.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>First Name</label>
                                    <input type="text" class="form-control border-input" placeholder="First Name" [(ngModel)]="user.firstName" name="firstName"
                                        [disabled]="editPass">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Last Name</label>
                                    <input type="text" class="form-control border-input" placeholder="Last Name" [(ngModel)]="user.lastName" name="lastName"
                                        [disabled]="editPass">
                                </div>
                            </div>
                        </div>





                        <div class="text-center">

                            <button type="submit" class="btn btn-info btn-fill btn-wd" [disabled]="!f.dirty || editPass">Update Profile</button>
                        </div>
                        <div class="clearfix"></div>
                    </form>
                    <br>
                    <div class="text-center">
                        <button class="btn btn-info btn-fill btn-wd" (click)="cancelUpdate()">Cancel</button>


                        <button class="btn btn-info btn-fill btn-wd" (click)="editPassword()" [disabled]="editPass">Edit Password</button>
                    </div>
                </div>
            </div>
        </div>


    </div>
    <div class="row">
        <div class="col-lg-8 col-md-7 col-lg-offset-4 col-md-offset-5">
            <div class="card" *ngIf="editPass">
                <div class="header">
                    <h4 class="title">Edit Password</h4>
                </div>
                <hr>
                <div class="content">
                    <form name="form" (ngSubmit)="updateProfile() && f.form.valid" #f="ngForm" novalidate>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Password</label>
                                    <input type="password" class="form-control border-input" placeholder="Password" [(ngModel)]="user.password" name="password">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Confirm Password</label>
                                    <input type="password" class="form-control border-input" placeholder="Confirm Password">
                                </div>
                            </div>
                        </div>




                        <div class="text-center">

                            <button type="submit" class="btn btn-info btn-fill btn-wd">Update Password</button>
                        </div>
                        <div class="clearfix"></div>
                    </form>
                    <br>
                    <div class="text-center">
                        <button class="btn btn-info btn-fill btn-wd" (click)="cancelPassword()">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>